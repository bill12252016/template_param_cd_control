global_arguments:
   EnvVars:
      METEOR_SETTINGS: '{{ METEOR_SETTINGS }}'
   region: us-east-1
   db_type: mongodb
   sg_db_label: database
   sg_web_label: web
infrastructure:
   vpc:
       stack_name: Cloud/Ec2/VPC/2tier/Database/Web/public
   dockerhost:
       stack_name: Deploy/Docker/Dev/SingleHost/create
       dependencies: 
           - infrastructure::vpc
       arguments:
          size: t2.nano
          disksize: 20
build:
   nginx-1:
       stack_name: Stacks/CI/General/Dev/main
       repo_url: https://github.com/bill12252016/nginx8087_89-ssl
       repo_branch: master
       triggered_branches:
                 - dev1
       arguments:
          ssh_port: 22010
          DOCKER_FILE_BUILD: configs/build/nginx-ssl/Dockerfile
          DockerProvider: docker.io
          DockerUsername: bill12252016
          DockerRepoType: public
          DockerRepoName: nginx8087_89-ssl
       rename:
           EnvVars:
             DockerImage: DOCKER_IMAGE_NGINX_1
       results:
           - name: deploy_1
   triggers:
       - name: nginx_1
         type: trigger
         path: deploy::test_nginx
         channels:
             - deploy_1
deploy:
    test_nginx:
       stack_name: Stacks/CD/General/DeployOnly/main
       arguments:
           job_name: test_nginx
           http_port: 8087
           ssh_port: 22020
           DOCKER_TEMPLATE_FILES:
                 - template_file: configs/deploy/nginx-ssl/Dockerfile.ja2
                   env_var_replacements: True
                   dest_dir: null
                 - template_file: configs/deploy/nginx-ssl/docker-compose.yml.ja2
                   env_var_replacements: True
                   dest_dir: null
