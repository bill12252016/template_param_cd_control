global_arguments:
   EnvVars:
      ED_NAME: bill
   region: us-east-1
   db_type: mysql
   sg_db_label: database
   sg_web_label: web
   git_ops: True
infrastructure:
   vpc:
       stack_name: aws_vpc_2tier
#   dockerhost:
#       stack_name: aws_ec2_dockerhost_dev
#       arguments:
#          size: t2.micro
#          disksize: 50
   db:
       stack_name: aws_db_rds
       arguments:
          flavor: "db.t2.micro"
          size: 5
          engine: "MySQL"
          az: False
build:
   flask_sample:
       stack_name: build_dev
       repo_url: https://github.com/bill12252016/flask_sample
       repo_branch: master
       triggered_branches:
                 - master
                 - dev
       arguments:
          DOCKER_FILE_BUILD: configs/build/Dockerfile
          DockerProvider: docker.io
          DockerUsername: bill12252016
          DockerRepoType: public
          DockerRepoName: flask_sample
       results:
           - name: deploy_1
       rename:
           EnvVars:
             DockerImage: DOCKER_IMAGE_FLASK
   triggers:
       - name: flask_sample
         type: trigger
         path: deploy::flask_dev
         channels:
             - deploy_1
deploy:
    flask_dev:
       stack_name: deploy_dev_gitops
       arguments:
           DOCKER_TEMPLATE_FILES:
              - template_dir: configs/deploy
